<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 4 Writing R code | An Introduction to R at Met Council</title>
  <meta name="description" content="These are materials intended for a four hour introduction to reproducible data analysis in R." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 4 Writing R code | An Introduction to R at Met Council" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="These are materials intended for a four hour introduction to reproducible data analysis in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 4 Writing R code | An Introduction to R at Met Council" />
  
  <meta name="twitter:description" content="These are materials intended for a four hour introduction to reproducible data analysis in R." />
  

<meta name="author" content="Katie Jolly" />


<meta name="date" content="2019-08-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-projects.html">
<link rel="next" href="packages.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R at Met Council</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome!</a></li>
<li class="chapter" data-level="2" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>2</b> Installing R and RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="setup.html"><a href="setup.html#rstudio-cloud"><i class="fa fa-check"></i><b>2.1</b> RStudio Cloud</a></li>
<li class="chapter" data-level="2.2" data-path="setup.html"><a href="setup.html#rstudio-desktop"><i class="fa fa-check"></i><b>2.2</b> RStudio Desktop</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>3</b> R Projects</a><ul>
<li class="chapter" data-level="3.1" data-path="r-projects.html"><a href="r-projects.html#set-up-your-project-cloud"><i class="fa fa-check"></i><b>3.1</b> Set up your project: Cloud</a></li>
<li class="chapter" data-level="3.2" data-path="r-projects.html"><a href="r-projects.html#set-up-your-project-desktop"><i class="fa fa-check"></i><b>3.2</b> Set up your project: Desktop</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="writing-r-code.html"><a href="writing-r-code.html"><i class="fa fa-check"></i><b>4</b> Writing R code</a><ul>
<li class="chapter" data-level="4.1" data-path="writing-r-code.html"><a href="writing-r-code.html#the-console"><i class="fa fa-check"></i><b>4.1</b> The console</a><ul>
<li class="chapter" data-level="4.1.1" data-path="writing-r-code.html"><a href="writing-r-code.html#try-it-out"><i class="fa fa-check"></i><b>4.1.1</b> Try it out</a></li>
<li class="chapter" data-level="4.1.2" data-path="writing-r-code.html"><a href="writing-r-code.html#r-objects"><i class="fa fa-check"></i><b>4.1.2</b> R objects</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="writing-r-code.html"><a href="writing-r-code.html#r-scripts"><i class="fa fa-check"></i><b>4.2</b> R scripts</a><ul>
<li class="chapter" data-level="4.2.1" data-path="writing-r-code.html"><a href="writing-r-code.html#comments"><i class="fa fa-check"></i><b>4.2.1</b> Comments</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="writing-r-code.html"><a href="writing-r-code.html#r-markdown"><i class="fa fa-check"></i><b>4.3</b> R markdown</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>5</b> Packages</a></li>
<li class="chapter" data-level="6" data-path="reading-in-data.html"><a href="reading-in-data.html"><i class="fa fa-check"></i><b>6</b> Reading in Data</a><ul>
<li class="chapter" data-level="6.1" data-path="reading-in-data.html"><a href="reading-in-data.html#data-packages"><i class="fa fa-check"></i><b>6.1</b> Data packages</a><ul>
<li class="chapter" data-level="6.1.1" data-path="reading-in-data.html"><a href="reading-in-data.html#try-it-out-1"><i class="fa fa-check"></i><b>6.1.1</b> Try it out</a></li>
<li class="chapter" data-level="6.1.2" data-path="reading-in-data.html"><a href="reading-in-data.html#practice"><i class="fa fa-check"></i><b>6.1.2</b> Practice</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>7</b> Visualization</a><ul>
<li class="chapter" data-level="7.1" data-path="visualization.html"><a href="visualization.html#base-r-plotting"><i class="fa fa-check"></i><b>7.1</b> Base R plotting</a></li>
<li class="chapter" data-level="7.2" data-path="visualization.html"><a href="visualization.html#ggplot2"><i class="fa fa-check"></i><b>7.2</b> ggplot2</a><ul>
<li class="chapter" data-level="7.2.1" data-path="visualization.html"><a href="visualization.html#categorical-data"><i class="fa fa-check"></i><b>7.2.1</b> Categorical data</a></li>
<li class="chapter" data-level="7.2.2" data-path="visualization.html"><a href="visualization.html#try-it-out-2"><i class="fa fa-check"></i><b>7.2.2</b> Try it out</a></li>
<li class="chapter" data-level="7.2.3" data-path="visualization.html"><a href="visualization.html#quantitative-data"><i class="fa fa-check"></i><b>7.2.3</b> Quantitative data</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="visualization.html"><a href="visualization.html#practice-1"><i class="fa fa-check"></i><b>7.3</b> Practice</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>8</b> Data Wrangling</a><ul>
<li class="chapter" data-level="8.1" data-path="data-wrangling.html"><a href="data-wrangling.html#row-verbs"><i class="fa fa-check"></i><b>8.1</b> Row verbs</a><ul>
<li class="chapter" data-level="8.1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#filter"><i class="fa fa-check"></i><b>8.1.1</b> Filter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="visualization-revisited.html"><a href="visualization-revisited.html"><i class="fa fa-check"></i><b>9</b> Visualization, revisited</a></li>
<li class="chapter" data-level="10" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>10</b> Modeling</a></li>
<li class="chapter" data-level="11" data-path="reading-in-data-revisited.html"><a href="reading-in-data-revisited.html"><i class="fa fa-check"></i><b>11</b> Reading in data, revisited</a></li>
<li class="chapter" data-level="12" data-path="more-resources.html"><a href="more-resources.html"><i class="fa fa-check"></i><b>12</b> More resources</a><ul>
<li class="chapter" data-level="12.1" data-path="more-resources.html"><a href="more-resources.html#projects-using-this-data"><i class="fa fa-check"></i><b>12.1</b> Projects using this data</a></li>
<li class="chapter" data-level="12.2" data-path="more-resources.html"><a href="more-resources.html#general-r-programming"><i class="fa fa-check"></i><b>12.2</b> General R Programming</a></li>
<li class="chapter" data-level="12.3" data-path="more-resources.html"><a href="more-resources.html#r-projects-and-reproducibility"><i class="fa fa-check"></i><b>12.3</b> R Projects (and reproducibility)</a></li>
<li class="chapter" data-level="12.4" data-path="more-resources.html"><a href="more-resources.html#r-markdown-1"><i class="fa fa-check"></i><b>12.4</b> R Markdown</a></li>
<li class="chapter" data-level="12.5" data-path="more-resources.html"><a href="more-resources.html#wrangling-visualization"><i class="fa fa-check"></i><b>12.5</b> Wrangling &amp; Visualization</a></li>
<li class="chapter" data-level="12.6" data-path="more-resources.html"><a href="more-resources.html#reading-in-data-1"><i class="fa fa-check"></i><b>12.6</b> Reading in Data</a></li>
<li class="chapter" data-level="12.7" data-path="more-resources.html"><a href="more-resources.html#modeling-and-statistical-inference"><i class="fa fa-check"></i><b>12.7</b> Modeling and Statistical Inference</a></li>
<li class="chapter" data-level="12.8" data-path="more-resources.html"><a href="more-resources.html#gis-and-urban-planning"><i class="fa fa-check"></i><b>12.8</b> GIS and Urban Planning</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="miscellaneous-notes.html"><a href="miscellaneous-notes.html"><i class="fa fa-check"></i><b>13</b> Miscellaneous notes</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R at Met Council</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="writing-r-code" class="section level1">
<h1><span class="header-section-number">Section 4</span> Writing R code</h1>
<p>There are three main places to write R code while using RStudio. In order of complexity, they are: the console, R scripts, and R markdown.</p>
<div id="the-console" class="section level2">
<h2><span class="header-section-number">4.1</span> The console</h2>
<p>The console should be thought of as scratch paper. It’s a way to test code before writing it in a document. It’s also nice for code that you only need to run once, like installing a package.</p>
<div id="try-it-out" class="section level3">
<h3><span class="header-section-number">4.1.1</span> Try it out</h3>
<ul>
<li><p>Type <code>3+2</code> and hit enter</p></li>
<li><p>Type <code>x &lt;- 3+2</code> and hit enter</p></li>
<li><p>Then, type <code>x</code> and hit enter</p></li>
</ul>
<p>What did you get back when you typed <code>x</code> into the console?</p>
<ul>
<li>Type <code>x * 4</code> and hit enter</li>
</ul>
<p>What happened now?</p>
</div>
<div id="r-objects" class="section level3">
<h3><span class="header-section-number">4.1.2</span> R objects</h3>
<p>R stores information in <strong>objects</strong>, or variables.</p>
<p>We created an object called <code>x</code> by naming it and assigning it with the <code>&lt;-</code> function to the value <code>3+2</code>. You may also see people write <code>x = 3+2</code> but that is less common.</p>
<p>Object names should be short and meaningful. They cannot start with a number and the only special characters allowed are <code>.</code> and <code>_</code>. Names are also <strong>case sensitive</strong>, as is all R code. Certain words have special meanings and cannot be used as object names. These include words like <code>if</code> and <code>else</code> because they have other meanings in R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span> &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">+</span><span class="dv">2</span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:1:4: unexpected assignment
## 1: if &lt;-
##        ^</code></pre>
<p>It won’t let us create the variable because it’s an off-limits name.</p>
<p>As a matter of style, it is recommended to:</p>
<ul>
<li><p>Use nouns</p></li>
<li><p>Avoid using <code>.</code> in names</p></li>
<li><p>Avoid using function names, even when technically allowed (this will become easier with time as you learn more function names)</p></li>
<li><p>Pick a style and go with it</p></li>
</ul>
<p>For example, I prefer using <code>_</code> in my object names instead of <code>camelCase</code>. If you want to learn more about style, consider reading the guides written by <a href="https://google.github.io/styleguide/Rguide.xml">Google</a> or the <a href="https://style.tidyverse.org/">Tidyverse packages</a> later.</p>
</div>
</div>
<div id="r-scripts" class="section level2">
<h2><span class="header-section-number">4.2</span> R scripts</h2>
<p>R scripts allow you to save the code that you write to run again later. They are essentially a document meant to read code. Let’s make one.</p>
<p>Go to <strong>File &gt; New File &gt; R Script</strong> or <strong>ctrl + shift + N</strong>.</p>
<p>Save your new R script in a new folder called <code>R</code> within your project folder.</p>
<p>On the first line, create an object that is assigned to your name. In R, characters (words) need to be surrounded by quotes. Numbers do not.</p>
<p>First, try without quotes. To run this either press the run button at the top of the script or press <strong>ctrl + enter</strong> when your cursor is on the line you want to run.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">name &lt;-<span class="st"> </span>Katie</code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;Katie&#39; not found</code></pre>
<p>It’s looking for an object called Katie. Why?</p>
<p>In R, variable names do not need quotes. This is how they are distinguished visually from character data.</p>
<p>Let’s try again.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">name &lt;-<span class="st"> &quot;Katie&quot;</span></code></pre></div>
<p>One common data structure in R is a <a href="https://www.datamentor.io/r-programming/vector/">vector</a>. It is a list of numbers, characters, or nearly any other data type. It can also be thought of a similar to a list (although its structure is slightly different). Vectors are created with the <code>c()</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">16</span>) <span class="co"># a vector of squares</span></code></pre></div>
<p>Vectors in R are great for a number of reasons. They’re useful ways to store data and perform a function on each element. For example I can have R add a constant to each element of my vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vec <span class="op">+</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre><code>## [1]  2  5 10 17</code></pre>
<p>I can also have it take the square root.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(vec)</code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<p>We will see more vectors when we get to wrangling.</p>
<div id="comments" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Comments</h3>
<p>Whenever you’re writing code, think of it as writing for someone who isn’t you. What this means is that you should leave comments that explain your thought process. People have differing opinions on what a good comment is, but it generally shouldn’t be something that just repeats the code. It should be something about why you chose that function, what you expect to get in your output, issues you had, etc etc.</p>
<p>In R you can write a comment by having a <code>#</code> at the beginning of the line.</p>
<p>In your script, write a comment to yourself about one thing you hope to be able to do in R after the workshop today.</p>
</div>
</div>
<div id="r-markdown" class="section level2">
<h2><span class="header-section-number">4.3</span> R markdown</h2>
<p>The third, and most universally useful in my opinion, way to write code is in an R markdown document. If you’ve used Jupyter notebooks in Python, it’s a similar idea. R markdown is a way to interweave code, analysis, output, and prose. The pandoc engine “knits” your document into a Word doc, PDF, or HTML. This book is an HTML file knitted from a bunch of R markdowns!</p>
<p>Today we will be working in R markdown to save our work and be able to reference it later.</p>
<p>To create an R markdown, go to <strong>File &gt; New File &gt; R Markdown…</strong></p>
<p>Write a title for your document (this is <strong>not</strong> the same thing as naming the file), add your name, and select HTML as the output format.</p>
<p><img src="images/03-04-newmarkdown.png" width="331" /></p>
<p>Erase everything in your document <strong>except</strong> the header. This is the part enclosed by <code>---</code>. But let me know if you accidentally delete that too! It’s not hard to fix. Anything typed just directly onto the document is plain text. We will write code in “chunks” later. There are also nice ways to include HTML elements like headers and bold text.</p>
<ul>
<li><p>At the top of your document, write a short paragraph about the best thing that happened to you last week. Start it with the header <code># Best part of last week</code>. The <code>#</code> in plain text indicates a header.</p></li>
<li><p>In your paragraph, use bold text at least once and bullet points at least twice. Use the R markdown <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">cheat sheet</a> to figure out how to do that.</p></li>
<li><p>Next, add this photo to your R markdown (Google this, hint: you will use parentheses and square brackets): <a href="https://www.metrotransit.org/Data/Sites/1/media/metro/greenline/metro_greenline_map_031716_web.png" class="uri">https://www.metrotransit.org/Data/Sites/1/media/metro/greenline/metro_greenline_map_031716_web.png</a></p></li>
</ul>
<p><img src="https://www.metrotransit.org/Data/Sites/1/media/metro/greenline/metro_greenline_map_031716_web.png" /><!-- --></p>
<ul>
<li><p>Finally, insert an R chunk from the top of the document by clicking <strong>Insert &gt; R</strong> or <strong>ctrl + alt + i</strong>. Type <code>3 + 4</code> and then run the code with the green arrow.</p></li>
<li><p>Now, knit your HTML (<em>Knit</em>) to see what it looks like!</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-projects.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="packages.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["met-council-introR.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
