# Data Wrangling

We will mostly be using the `tidyr` and `dplyr` packages for wrangling. With those packages, most wrangling is done with 6 "data verbs." These are `select()`, `mutate()`, `filter()`, `arrange()`, `group_by()`, and `summarise()`. One quick note: summarise can be spelled the British or American way (as can any word with dual spellings). Much of the software was developed by people in New Zealand, hence the British spellings. I learned with British spellings so that's what I use, but it works either way. 

We can divide our verbs into 3 categories: row verbs, column verbs, and aggregate verbs. 

All of the verbs work in a similar way. The general structure is `verb(data, action)`.

## Row verbs

The two row verbs are `filter()` and `arrange()`. Filter works by taking out rows that we don't want in our data. Arrange works by ordering the rows in some way. We will talk about filter first.

### Filter

Filter takes in boolean statements and returns only the `TRUE` ones. For example, `>`, `<`, and `==` are boolean statements. The double equal is R's way of saying something "is equivalent to."

Let's start by creating a dataframe of only Saturday trips.

```{r}
# create a new dataframe called weekend_trips

saturday_trips <- filter(nice_ride_2018, start_day == "Sat") 

dim(saturday_trips) # check that you have these dimensions
```

We can also make a dataframe of trips that ended after 12 noon.

```{r}
after_12 <- filter(nice_ride_2018, end_hour > 12) 

dim(after_12)
```

Let's say we want some combination of filters. Maybe we want only the Saturday trips that ended after noon? We will use the `&` operator in between filter actions.

```{r}
saturday_after_12 <- filter(nice_ride_2018, end_hour > 12 & start_day == "Sat")

dim(saturday_after_12)
```

Now let's make a dataframe of all the trips on a weekend day. We will use the `|` (or) operator in between filter actions. 

```{r}
weekend_trips <- filter(nice_ride_2018, start_day == "Sat" | start_day == "Sun")

dim(weekend_trips)
```

Let's add Friday to that list.

```{r}
weekendFri_trips <- filter(nice_ride_2018, start_day == "Sat" | start_day == "Sun" | start_day == "Fri")

dim(weekendFri_trips)
```

It gets a little long to write that all out, and this is a pretty simply query. Luckily, R has an `%in%` operator to filter "in bulk."

We would get the same results as above by writing:

```{r}
weekendFri_trips <- filter(nice_ride_2018, start_day %in% c("Sat", "Sun", "Fri"))

dim(weekendFri_trips)
```


